<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{ title or 'E-Learning' }}</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
	<nav class="navbar">
		<a href="{{ url_for('dashboard') }}">Dashboard</a>
		<a href="{{ url_for('announcements_page') }}">Announcements</a>
		<a href="{{ url_for('lessons_page') }}">Lessons</a>
		{% if current_user.is_authenticated and current_user.role == 'teacher' %}
			<a href="{{ url_for('quiz_create') }}">Create Quiz</a>
			<a href="{{ url_for('quiz_manage') }}">Manage Quizzes</a>
			<form action="{{ url_for('reset') }}" method="post" style="display:inline" onsubmit="return confirm('Reset all data?');">
				<button type="submit" class="danger">Reset Data</button>
			</form>
		{% endif %}
		{% if current_user.is_authenticated %}
			<a href="{{ url_for('logout') }}">Logout</a>
		{% else %}
			<a href="{{ url_for('login') }}">Login</a>
			<a href="{{ url_for('register') }}">Register</a>
		{% endif %}
	</nav>
	<main class="container">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<ul class="flashes">
				{% for category, message in messages %}
					<li class="flash {{ category }}">{{ message }}</li>
				{% endfor %}
				</ul>
			{% endif %}
		{% endwith %}
		{% block content %}{% endblock %}
	</main>
	<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>